"bundle";"use strict";System.register("FileListToArrayValueConverter.js",[],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[],execute:function(){a("FileListToArrayValueConverter",d=function(){function a(){c(this,a)}return a.prototype.toView=function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++)b.push(a[c]);return b},a}()),a("FileListToArrayValueConverter",d),a("BlobToUrlValueConverter",e=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return URL.createObjectURL(a)},a}()),a("BlobToUrlValueConverter",e)}}}),System.register("ObjectKeysValueConverter.js",[],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("ObjectKeysValueConverter",d=function(){function a(){c(this,a)}return a.prototype.toView=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},a}()),a("ObjectKeysValueConverter",d)}}}),System.register("ObjectValuesValueConverter.js",[],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("ObjectValuesValueConverter",d=function(){function a(){c(this,a)}return a.prototype.toView=function(a){for(var b=[],c=a,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;b.push(g)}return b},a}()),a("ObjectValuesValueConverter",d)}}}),function(){var a=System.amdDefine;a("admin-facilitator-assign.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="row"><div class="col-md-8 col-md-offset-2"><div class="panel panel-default"><table id="facilitatorAssignTable" class="table"><thead><tr><th>Username</th><th>Assignments</th></tr></thead><tbody><tr repeat.for="user of assignments"><td>${user.username}</td><td><div repeat.for="assignment of user.rj_cases"><a href="/#/cases/edit?id=${assignment.id}">${assignment.caseId}</a></div></td></tr></tbody></table></div></div></div></template>'})}(),System.register("admin-facilitator-assign.js",["aurelia-framework","aurelia-http-client","jquery","datatables"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a["default"]},function(a){g=a["default"]}],execute:function(){a("ViewCase",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.http=b}return a.prototype.activate=function(){var a=this;return this.http.get("/api/user/assignments").then(function(b){a.assignments=b.content})},a.prototype.attached=function(){f("#facilitatorAssignTable").dataTable()},a}())||i)),a("ViewCase",j)}}}),function(){var a=System.amdDefine;a("admin-reports.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="flex-grid"><div class="col"><div class="panel panel-default"><div class="panel-heading">Reports</div><div class="panel-body"><form name="boardReportForm" id="boardReportForm" method="post" action="/api/reports/get-cases-with-filters"><div class="inputContainer"><input type="hidden" name="_token" value.bind="token"><div class="row"><div class="col-sm-5"><div><label for="report-type">Report Type:</label></div><div><span class="inputField"><select value.bind="selectedReportType" change.delegate="autoFillReportParamsByType(selectedReportType)" class="report-type" id="report-type" name="report-type"><option value="">Select Report Type</option><option value="adult-report">Adult Case Status</option><option value="juvenile-report">Juvenile Case Status</option><option value="cdw-report">CDW Case Status</option><option value="board-report">Board Report</option><option value="annual-report">Annual Report</option><option value="user-case-history-report">Facilitator Case History</option><option value="user-active-cases-report">Facilitator Active Cases</option><option value="victim-summary-report">Victim Summary</option><option value="default-report">All Fields</option></select></span></div></div></div><div class="row"><div class="col-sm-5"><div><label for="userName">Case Type:</label></div><span class="inputField"><select value.bind="selectedCaseType" class="case-type" id="case-type" name="case-type"><option value="all">Adult and Juvenile</option><option value="adult">Adult</option><option value="juvenile">Juvenile</option></select></span></div></div><div class="row"><div class="col-sm-5"><div><label for="case-status">Case Status:</label></div><div><span class="inputField"><select value.bind="selectedCaseStatus" class="case-status" id="case-status" name="case-status"><option value="all">All Open/Closed Cases</option><option value="open-pending-monitoring">Open - Pending and Monitoring</option><option value="open-pending">Open - Pending</option><option value="open-monitoring">Open - Monitoring</option><option value="closed">Closed</option></select></span></div></div><div class="col-sm-5"><div><label for="userName">Username:</label></div><div><span class="inputField"><input type="text" name="userName" id="userName"></span></div></div></div><div class="row"><div class="col-sm-5"><div class="inputField"><div><label for="dateStart">Referral Date Start:</label></div><div><span><input type="text" name="dateStart" id="dateStart"></span></div></div></div><div class="col-sm-5"><div class="inputField"><div><label for="dateEnd">Referral Date End:</label></div><div><span><input type="text" name="dateEnd" id="dateEnd"></span></div></div></div></div></div><button class="btn btn-green float-right" type="submit">Run Report</button></form></div></div></div></div></template>'})}(),System.register("admin-reports.js",["aurelia-framework","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient}],execute:function(){a("AdminReports",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.http=b}return a.prototype.activate=function(){var a=this;this.selectedReportType="",this.selectedCaseType="",this.selectedCaseStatus="",this.showUserName=0,this.http.get("/api/reports/index").then(function(b){a.token=b.content.token})},a.prototype.attached=function(){},a.prototype.autoFillReportParamsByType=function(a){switch(a){case"juvenile-report":this.autoFill("juvenile","open-pending-monitoring");break;case"adult-report":this.autoFill("adult","open-pending-monitoring");break;case"cdw-report":this.autoFill("juvenile","open-pending-monitoring");break;case"board-report":this.autoFill("all","all");break;case"user-case-history-report":this.autoFill("all","all");break;case"user-active-cases-report":this.autoFill("all","open-pending");break;case"victim-summary-report":this.autoFill("all","all")}},a.prototype.autoFill=function(a,b){this.selectedCaseType=a,this.selectedCaseStatus=b},a}())||g)),a("AdminReports",h)}}}),function(){var a=System.amdDefine;a("admin.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="./child-nav-bar.html"></require><child-nav-bar router.bind="router"></child-nav-bar></template>'})}(),System.register("admin.js",["aurelia-framework","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient}],execute:function(){a("Admin",(f=d(e),h=f(g=function(){function a(b){function d(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null}c(this,a),this.http=b.configure(function(a){a.withHeader("X-CSRF-TOKEN",d("XSRF-TOKEN"))})}return a.prototype.configureRouter=function(a,b){a.map([{route:[""],name:"admin-facilitator-assign",moduleId:"admin-facilitator-assign",nav:!0,title:"Facilitator Assignments"},{route:["/reports"],name:"admin-reports",moduleId:"admin-reports",nav:!0,title:"Reports"}]),this.router=b},a}())||g)),a("Admin",h)}}}),function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="container-fluid"><div class="row"><div class="col-sm-2"><require from="./nav-bar"></require><nav-bar></nav-bar></div><div class="col-sm-10"><router-view></router-view></div></div></div></template>'})}(),System.register("app.js",["aurelia-router","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[function(a){d=a.Router},function(a){e=a.HttpClient}],execute:function(){a("App",f=function(){function a(b,d){var e=this;c(this,a),this.router=b,this.http=d;var f=[];if(this.user=userObj,"undefined"!=typeof userObj)if("admin"==userObj.role||"caseadmin"==userObj.role)var f=[{route:["","home/"],moduleId:"home",nav:!0,title:"Home"},{route:["cases/"],moduleId:"cases",nav:!0,title:"Cases"},{route:["victim/"],moduleId:"victims",nav:!0,title:"Victims"},{route:["offender/"],moduleId:"offenders",nav:!0,title:"Offenders"},{route:["users/"],moduleId:"users",nav:!0,title:"Users"},{route:["admin/"],moduleId:"admin",nav:!0,title:"Admin"}];else if("facilitator"!==userObj.role)var f=[{route:["","home/"],moduleId:"home",nav:!0,title:"Home"},{route:["cases/"],moduleId:"cases",nav:!0,title:"Cases"},{route:["victim/"],moduleId:"victims",nav:!0,title:"Victims"},{route:["offender/"],moduleId:"offenders",nav:!0,title:"Offenders"},{route:["users/"],moduleId:"users",nav:!0,title:"Users"}];else if("facilitator"==userObj.role)var f=[{route:["","home/"],moduleId:"home",nav:!0,title:"Home"},{route:["cases/"],moduleId:"cases",nav:!0,title:"Cases"}];this.router.configure(function(a){a.title=e.user,a.parent="true",a.map(f)})}return a.inject=function(){return[d,e]},a.prototype.activate=function(){this.user=userObj,console.log("tes")},a.prototype.attached=function(){},a}()),a("App",f)}}}),function(){var a=System.amdDefine;a("cases.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="./child-nav-bar.html"></require><child-nav-bar router.bind="router"></child-nav-bar></template>'})}(),System.register("cases.js",["aurelia-framework","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient}],execute:function(){a("Cases",(f=d(e),h=f(g=function(){function a(b){function d(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null}c(this,a),this.http=b.configure(function(a){a.withHeader("X-CSRF-TOKEN",d("XSRF-TOKEN"))})}return a.prototype.configureRouter=function(a,b){var c=[];if("undefined"!=typeof userObj)if("facilitator"!==userObj.role)var c=[{route:["","cases/view"],moduleId:"view-case",nav:!0,title:"Case View"},{route:["create"],moduleId:"create-case",nav:!0,title:"Case Create"},{route:["edit"],name:"edit-case",moduleId:"edit-case",nav:!1,title:"Edit Case"}];else if("facilitator"==userObj.role)var c=[{route:["","cases/view"],moduleId:"view-case",nav:!0,title:"Case View"},{route:["edit/"],name:"edit-case",moduleId:"edit-case",nav:!1,title:"Edit Case"}];a.map(c),this.router=b},a}())||g)),a("Cases",h)}}}),function(){var a=System.amdDefine;a("child-nav-bar.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template bindable="router"><section class="au-animate"><div><div class="row"><div class="col-sm-12"><ul id="childNav"><li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'} text-center"><a href.bind="row.href"><span class="childNavItem">${row.title}</span></a></li></ul></div></div><div class="row"><div class="col-sm-12"><router-view></router-view></div></div></div></section></template>'})}(),System.register("child-nav-bar.js",[],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("ChildRouter",d=function(){function a(){c(this,a)}return a.prototype.openNav=function(){document.getElementById("navbar-app").style.width="250px"},a.prototype.closeNav=function(){document.getElementById("navbar-app").style.width="0"},a}()),a("ChildRouter",d)}}}),function(){var a=System.amdDefine;a("create-case.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><form name="casesForm" id="casesForm" method="post" action="/api/cases/" submit.delegate="submitCase()"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading">Case</div><div class="panel-body"><div repeat.for="item of caseFieldData"><require from="ObjectKeysValueConverter"></require><div><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="$index % 3 == 0 && $index !== 0"></div><div if.bind="prop.type == \'input\'"><div class="col-sm-4 inputContainer"><div><label for="${prop.name}">${prop.namePretty}</label></div><div><span><input type="text" name="${prop.name}" id="${prop.name}" value.bind="caseFieldData[0][prop.name][\'value\']" placeholder="${prop.placeholder}"></span></div></div></div><div if.bind="prop.type  == \'select\'"><div class="col-sm-4 inputContainer"><div><label for="${prop.name}">${prop.namePretty}</label></div><select name="${prop.name}" id="{prop.name}" value.bind="caseFieldData[0][prop.name][\'value\']"><option repeat.for="option of prop.options | objectKeys" value="${option.value}">${option.name}</option></select></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6 inputContainer"><div><label for="${prop.name}">${prop.namePretty}</label></div><span><textarea rows="10" name="caseFieldData[case][${prop.name}]" id="${prop.name}" value.bind="caseFieldData[0][prop.name][\'value\']"></textarea></span></div></div></div><div class="clearfix"></div><div class="col-sm-6"><div class="charge-select-wrapper"><div class="charge-select2-container"><require from="resources/custom-select"></require><div><label for="${charge.id}">Charge(s):</label></div><select class="charge-select" select2.bind="options" value.bind="selectedCharge" multiple="multiple" name="charge"><option repeat.for="charge of charges" model.bind="charge.id" id="${charge.id}" value="${charge.id}">${charge.charges}</option></select></div></div></div><div class="col-sm-6"><div class="facilitator-select-wrapper"><div class="facilitator-select2-container"><require from="resources/custom-select"></require><div><label for="${facilitator.id}">Facitlitator(s):</label></div><select class="facilitator-select" select2.bind="options" value.bind="selectedFacilitator" multiple="multiple" name="facilitator"><option repeat.for="facilitator of facilitators" model.bind="facilitator.id" id="${facilitator.id}" value="${facilitator.id}">${facilitator.username}</option></select></div></div></div></div></div></div></div></div></div><div id="victimSection"><section id="victim"><div if.bind="victimFieldData.length !== 0" repeat.for="item of victimFieldData"><div id="victim-${$index}" class="panel panel-default"><div class="panel-heading"><div class="personHeading"><span class="personNumber">Victim ${$index + 1}</span> <span class="removeContainer"><button type="button" id="removeVictim" class="btn btn-danger" click.delegate="removeVictim($index)">Remove Victim ${$index + 1}</button></span></div></div><div class="panel-body"><div class="index" style="visibility: hidden">${$parentIndex = $index}</div><div class="row"><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="prop.clearfix == \'true\'"></div><div class="col-sm-4"><div if.bind="prop.type !== \'textarea\'"><label for="victim-${prop.name}-${$parentIndex}">${prop.namePretty}:</label></div><div><div class="inputContainer" if.bind="prop.type  == \'input\'"><input type="text" name="${prop.name}" id="victim-${prop.name}-${$parentIndex}" value.bind="victimFieldData[$parentIndex][prop.name][\'value\']" placeholder="${prop.placeholder}"> <span if.bind="prop.name == \'lastName\' || prop.name == \'firstName\' || prop.name == \'socialSecurityNumber\'"><div class="btn btn-info" id="${prop.name}-search-${$parentIndex}" click.delegate="victimSearch(prop.name, prop.value, prop.name + \'-search-\' + $parentIndex  )" data-index="${$parentIndex}">Search</div></span></div><div if.bind="prop.type  == \'select\'"><select name="${prop.name}" id="victim-${prop.name}-${$parentIndex}" value.bind="victimFieldData[$parentIndex][prop.name][\'value\']"><option repeat.for="option of prop.options | objectKeys">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6 inputContainer"><div><label for="${prop.name}">${prop.namePretty}</label></div><span><textarea rows="10" name="${prop.name}" id="victim-${prop.name}-${$parentIndex}" value.bind="victimFieldData[$parentIndex][prop.name][\'value\']"></textarea></span></div></div></div></div></div></div></div></section><button type="button" id="addVictim" class="btn btn-success" click.delegate="addVictim()">Add Victim</button></div><div id="offenderSection"><section id="offender"><div if.bind="offenderFieldData.length !== 0" repeat.for="item of offenderFieldData"><div id="offender-${$index}" class="panel panel-default"><div class="panel-heading"><div class="personHeading"><span class="personNumber">Offender ${$index + 1}</span> <span class="removeContainer"><button type="button" id="removeOffender" class="btn btn-danger" click.delegate="removeOffender($index)">Remove Offender ${$index + 1}</button></span></div></div><div class="panel-body"><div class="index" style="visibility: hidden">${$parentIndex = $index}</div><div class="row"><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="prop.clearfix == \'true\'"></div><div class="col-sm-4"><div if.bind="prop.type !== \'textarea\'"><label for="offender-${prop.name}-${$parentIndex}">${prop.namePretty}:</label></div><div><div class="inputContainer" if.bind="prop.type  == \'input\'"><input type="text" name="${prop.name}" id="offender-${prop.name}-${$parentIndex}" value.bind="offenderFieldData[$parentIndex][prop.name][\'value\']" placeholder="${prop.placeholder}"> <span if.bind="prop.name == \'lastName\' || prop.name == \'firstName\' || prop.name == \'socialSecurityNumber\'"><div class="btn btn-info" id="${prop.name}-search-${$parentIndex}" click.delegate="offenderSearch(prop.name, prop.value, prop.name + \'-search-\' + $parentIndex  )" data-index="${$parentIndex}">Search</div></span></div><div if.bind="prop.type  == \'select\'"><select name="${prop.name}" id="offender-${prop.name}-${$parentIndex}" value.bind="offenderFieldData[$parentIndex][prop.name][\'value\']"><option repeat.for="option of prop.options | objectKeys">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6 inputContainer"><div><label for="${prop.name}">${prop.namePretty}</label></div><span><textarea rows="10" name="${prop.name}" id="offender-${prop.name}-${$parentIndex}" value.bind="offenderFieldData[$parentIndex][prop.name][\'value\']"></textarea></span></div></div></div></div></div></div></div></section><button type="button" id="addOffender" class="btn btn-warning" click.delegate="addOffender()">Add Offender</button></div><div class="modal fade" id="victimModal" tabindex="-1" role="dialog" aria-labelledby="victimModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="victimModalLabel">Victims</h4></div><div class="modal-body"><input type="hidden" name="modalVictimIndex" id="modalVictimIndex" value=""><table id="victimTable" class="table"><thead><tr><th>Victim ID</th><th>Victim First Name</th><th>Victim Last Name</th><th>Action</th></tr></thead><tbody><tr if.bind="victimSearchResults.length !== 0" repeat.for="victim of victimSearchResults"><td>${victim.victimId}</td><td>${victim.firstName}</td><td>${victim.lastName}</td><td><a click.delegate="populateVictim(victim)">Select</a></td></tr></tbody></table></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div><div class="modal fade" id="offenderModal" tabindex="-1" role="dialog" aria-labelledby="offenderModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="offenderModalLabel">Offenders</h4></div><div class="modal-body"><input type="hidden" name="modalOffenderIndex" id="modalOffenderIndex" value=""><table id="offenderTable" class="table"><thead><tr><th>Offender ID</th><th>Offender First Name</th><th>Offender Last Name</th><th>Action</th></tr></thead><tbody><tr if.bind="offenderSearchResults.length !== 0" repeat.for="offender of offenderSearchResults"><td>${offender.offenderId}</td><td>${offender.firstName}</td><td>${offender.lastName}</td><td><a click.delegate="populateOffender(offender)">Select</a></td></tr></tbody></table></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div><div class="submitContainer"><button class="btn btn-default btn-lg btn-danger btn-submit-item" type="submit">Submit</button></div></form></template>'})}(),System.register("create-case.js",["aurelia-framework","aurelia-http-client","aurelia-router","jquery-validation","bootstrap"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.Router},function(a){g=a["default"]},function(a){h=a["default"]}],execute:function(){a("CreateCase",(i=d(e,f),k=i(j=function(){function a(b,d){c(this,a),this.http=b,this.router=d}return a.prototype.activate=function(){var a=this;return this.caseFieldData=[],this.victimFieldData=[],this.victimSearchResults=[],this.offenderSearchResults=[],this.offenderFieldData=[],this.selectedCharge=[],this.selectedFacilitator=[],this.victimCount=0,this.data=[],this.http.get("/api/cases/create").then(function(b){a.charges=b.content.charges,a.facilitators=b.content.facilitators,a.caseFieldData=[b.content.caseFieldData],a.victimFieldMapping=b.content.victimFieldData,a.offenderFieldMapping=b.content.offenderFieldData})},a.prototype.addVictim=function(){this.newVictimFieldMapping=[],this.newVictimFieldMapping=$.extend(!0,{},this.victimFieldMapping),this.victimFieldData.push(this.newVictimFieldMapping),this.victimCount++},a.prototype.removeVictim=function(a){this.victimFieldData.splice(a,1)},a.prototype.addOffender=function(){this.newOffenderFieldMapping=[],this.newOffenderFieldMapping=$.extend(!0,{},this.offenderFieldMapping),this.offenderFieldData.push(this.newOffenderFieldMapping),this.offenderCount++},a.prototype.removeOffender=function(a){this.offenderFieldData.splice(a,1)},a.prototype.submitCase=function(){var a=this;this.data={"case":this.caseFieldData,victim:this.victimFieldData,offender:this.offenderFieldData,charge:this.selectedCharge,facilitator:this.selectedFacilitator},this.http.post("/api/cases",this.data).then(function(b){console.log("done"),a.router.navigateToRoute("edit-case",{id:b.content.id})})},a.prototype.setupCaseValidation=function(){var a,b=this;$.validator.addMethod("dateFormat",function(a,b){return a.match(/^\d{2}\/\d{2}\/\d{4}$/)},"Please enter a date in the format MM/DD/YYYY"),$.validator.addMethod("states",function(a,b){return a.match(/^(?:(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]))$/)},"Please enter a state in two letters, e.g., KY"),$("#casesForm").validate({onkeyup:!1,rules:(a={caseId:{required:!0,remote:{url:"/api/cases/exists"}},caseStatus:{required:!0},courtDate:{required:!0,dateFormat:!0},charge:{required:!0},dateOfCharge:{required:!0,dateFormat:!0},dateOfReferral:{required:!0,dateFormat:!0},email:{email:!0},firstName:{required:!0},lastName:{required:!0},dateOfBirth:{dateFormat:!0},streetAddress:{required:!0},city:{required:!0},state:{states:!0},zipCode:{required:!0},phoneOne:{required:!0},phoneOneType:{required:!0},phoneTwo:{}},a.zipCode={required:!0},a),messages:{caseId:{remote:"This Case ID already exists"},victimId:{remote:"This Victim ID already exists"},offenderId:{remote:"This Offender ID already exists"}},submitHandler:function(a){b.submitCase()}})},a.prototype.attached=function(){this.setupCaseValidation(),$("#victimModal").on("show.bs.modal",function(a){var b=$(a.relatedTarget).data("index");$(a.currentTarget).find('input[name="modalVictimIndex"]').val(b)}),$("#victimModal").on("hide.bs.modal",$.proxy(function(a){this.victimSearchResults=[]},this)),$("#offenderModal").on("show.bs.modal",function(a){var b=$(a.relatedTarget).data("index");$(a.currentTarget).find('input[name="modalOffenderIndex"]').val(b)}),$("#offenderModal").on("hide.bs.modal",$.proxy(function(a){this.offenderSearchResults=[]},this))},a.prototype.victimSearch=function(a,b,c){var d=this;return this.http.get("/api/victim/search?searchType="+a+"&searchStr="+b).then(function(a){d.victimSearchResults=a.content.victims,$("#victimModal").modal("show",$("#"+c))})},a.prototype.offenderSearch=function(a,b,c){var d=this;return this.http.get("/api/offender/search?searchType="+a+"&searchStr="+b).then(function(a){d.offenderSearchResults=a.content.offenders,$("#offenderModal").modal("show",$("#"+c))})},a.prototype.populateVictim=function(a){console.log("log");var b="",c=parseInt($('input[name="modalVictimIndex"]').val());for(b in this.victimFieldData[c])this.victimFieldData[c][b].value=a[b];$("#victimModal").modal("hide")},a.prototype.populateOffender=function(a){console.log("log");var b="",c=parseInt($('input[name="modalOffenderIndex"]').val());for(b in this.offenderFieldData[c])this.offenderFieldData[c][b].value=a[b];$("#offenderModal").modal("hide")},a}())||j)),a("CreateCase",k)}}}),function(){var a=System.amdDefine;a("create-offender.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><form name="offendersForm" id="offendersForm" method="post" action="/api/offender/" submit.delegate="submitOffender()"><section id="offender"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading">Offender</div><div class="panel-body"><div repeat.for="item of offenderFieldData"><require from="ObjectKeysValueConverter"></require><div><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="prop.clearfix == \'true\'"></div><div class="col-sm-4"><div if.bind="prop.type !== \'textarea\'"><label for="offender-${prop.name}">${prop.namePretty}:</label></div><div><div class="inputField" if.bind="prop.type  == \'input\'"><input type="text" name="${prop.name}" id="offender-${prop.name}" value.bind="offenderFieldData[0][prop.name][\'value\']" placeholder="${prop.placeholder}"></div><div class="inputField" if.bind="prop.type  == \'select\'"><select name="${prop.name}" id="offender-${prop.name}" value.bind="offenderFieldData[0][prop.name][\'value\']"><option repeat.for="option of prop.options | objectKeys">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6 inputContainer"><div><label for="offender-${prop.name}">${prop.namePretty}</label></div><span><textarea rows="10" name="${prop.name}" id="offender-${prop.name}" value.bind="offenderFieldData[0][prop.name][\'value\']"></textarea></span></div></div></div></div></div></div></div></div></div></section><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading">Case</div><div class="panel-body"><div class="col-sm-3"><div class="case-select-wrapper"><div class="case-select2-container"><require from="resources/custom-select"></require><div><label for="${case.id}">Case(s):</label></div><select class="case-select" select2.bind="options" value.bind="selectedCase" multiple="multiple" name="case"><option repeat.for="case of cases" model.bind="case.id" id="${case.id}" value="${case.id}">${case.caseId}</option></select></div></div></div></div></div></div></div><div class="submitContainer"><button class="btn btn-default btn-lg btn-danger btn-submit-item" type="submit">Submit</button></div></form></template>'})}(),System.register("create-offender.js",["aurelia-framework","aurelia-http-client","aurelia-router","jquery-validation","bootstrap"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.Router},function(a){g=a["default"]},function(a){h=a["default"]}],execute:function(){a("CreateCase",(i=d(e,f),k=i(j=function(){function a(b,d){c(this,a),this.http=b,this.router=d}return a.prototype.activate=function(){var a=this;return this.caseFieldData=[],this.offenderFieldData=[],this.selectedCase=[],this.data=[],this.http.get("/api/offender/create").then(function(b){a.cases=b.content.cases,a.offenderFieldData=[b.content.offenderFieldData]})},a.prototype.submitOffender=function(){var a=this;this.data={offender:this.offenderFieldData,cases:this.selectedCase},this.http.post("/api/offender",this.data).then(function(b){console.log("done"),a.router.navigateToRoute("edit-offender",{id:b.content.id})})},a.prototype.setupOffenderValidation=function(){var a,b,c=this;$.validator.addMethod("dateFormat",function(a,b){return a.match(/^\d{2}\/\d{2}\/\d{4}$/)},"Please enter a date in the format MM/DD/YYYY"),$.validator.addMethod("states",function(a,b){return a.match(/^(?:(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]))$/)},"Please enter a state in two letters, e.g., KY"),$("#offendersForm").validate({onkeyup:!1,rules:(a={caseStatus:{required:!0},courtDate:{required:!0,dateFormat:!0},charge:{required:!0},dateOfCharge:{required:!0,dateFormat:!0},dateClosed:{dateFormat:!0},dateOfReferral:{required:!0,dateFormat:!0},email:{email:!0},firstName:{required:!0},lastName:{required:!0},dateOfBirth:{required:!0,dateFormat:!0},streetAddress:{required:!0},city:{required:!0},state:{states:!0},zipCode:{required:!0},phoneOne:{required:!0},phoneOneType:{required:!0},phoneTwo:{}},a.zipCode={required:!0},a),messages:(b={caseId:{remote:"This Case ID already exists"},offenderId:{remote:"This Offender ID already exists"}},b.offenderId={remote:"This Offender ID already exists"},b),submitHandler:function(a){c.submitOffender()}})},a.prototype.attached=function(){this.setupOffenderValidation()},a}())||j)),a("CreateCase",k)}}}),function(){var a=System.amdDefine;a("create-victim.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><form name="victimsForm" id="victimsForm" method="post" action="/api/victim/" submit.delegate="submitVictim()"><section id="victim"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading">Victim</div><div class="panel-body"><div repeat.for="item of victimFieldData"><require from="ObjectKeysValueConverter"></require><div><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="prop.clearfix == \'true\'"></div><div class="col-sm-4"><div if.bind="prop.type !== \'textarea\'"><label for="victim-${prop.name}">${prop.namePretty}:</label></div><div><div class="inputField" if.bind="prop.type  == \'input\'"><input type="text" name="${prop.name}" id="victim-${prop.name}" value.bind="victimFieldData[0][prop.name][\'value\']" placeholder="${prop.placeholder}"></div><div class="inputField" if.bind="prop.type  == \'select\'"><select name="${prop.name}" id="victim-${prop.name}" value.bind="victimFieldData[0][prop.name][\'value\']"><option repeat.for="option of prop.options | objectKeys">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6 inputContainer"><div><label for="victim-${prop.name}">${prop.namePretty}</label></div><span><textarea rows="10" name="${prop.name}" id="victim-${prop.name}" value.bind="victimFieldData[0][prop.name][\'value\']"></textarea></span></div></div></div></div></div></div></div></div></div></section><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading">Case</div><div class="panel-body"><div class="col-sm-3"><div class="case-select-wrapper"><div class="case-select2-container"><require from="resources/custom-select"></require><div><label for="${case.id}">Case(s):</label></div><select class="case-select" select2.bind="options" value.bind="selectedCase" multiple="multiple" name="case"><option repeat.for="case of cases" model.bind="case.id" id="${case.id}" value="${case.id}">${case.caseId}</option></select></div></div></div></div></div></div></div><div class="submitContainer"><button class="btn btn-default btn-lg btn-danger btn-submit-item" type="submit">Submit</button></div></form></template>';
})}(),System.register("create-victim.js",["aurelia-framework","aurelia-http-client","aurelia-router","jquery-validation","bootstrap"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.Router},function(a){g=a["default"]},function(a){h=a["default"]}],execute:function(){a("CreateCase",(i=d(e,f),k=i(j=function(){function a(b,d){c(this,a),this.http=b,this.router=d}return a.prototype.activate=function(){var a=this;return this.caseFieldData=[],this.victimFieldData=[],this.selectedCase=[],this.data=[],this.http.get("/api/victim/create").then(function(b){a.cases=b.content.cases,a.victimFieldData=[b.content.victimFieldData]})},a.prototype.submitVictim=function(){var a=this;this.data={victim:this.victimFieldData,cases:this.selectedCase},this.http.post("/api/victim",this.data).then(function(b){console.log("done"),a.router.navigateToRoute("edit-victim",{id:b.content.id})})},a.prototype.setupVictimValidation=function(){var a,b=this;$.validator.addMethod("dateFormat",function(a,b){return a.match(/^\d{2}\/\d{2}\/\d{4}$/)},"Please enter a date in the format MM/DD/YYYY"),$.validator.addMethod("states",function(a,b){return a.match(/^(?:(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]))$/)},"Please enter a state in two letters, e.g., KY"),$("#victimsForm").validate({onkeyup:!1,rules:(a={caseStatus:{required:!0},courtDate:{required:!0,dateFormat:!0},charge:{required:!0},dateOfCharge:{required:!0,dateFormat:!0},dateClosed:{dateFormat:!0},dateOfReferral:{required:!0,dateFormat:!0},email:{email:!0},firstName:{required:!0},lastName:{required:!0},dateOfBirth:{dateFormat:!0},streetAddress:{required:!0},city:{required:!0},state:{states:!0},zipCode:{required:!0},phoneOne:{required:!0},phoneOneType:{required:!0},phoneTwo:{}},a.zipCode={required:!0},a),messages:{caseId:{remote:"This Case ID already exists"},victimId:{remote:"This Victim ID already exists"},offenderId:{remote:"This Offender ID already exists"}},submitHandler:function(a){b.submitVictim()}})},a.prototype.attached=function(){this.setupVictimValidation()},a}())||j)),a("CreateCase",k)}}}),function(){var a=System.amdDefine;a("edit-case.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div id="edit"><div class="alert alert-success" role="alert" show.bind="caseSuccess">Updated Successfully!</div><div id="navbar-app"><div class="loader loaderOverlay" show.bind="loaderOverlay"><div class="spinner"><i class="fa fa-spinner fa-pulse fa-3x icon-white"></i></div></div></div><form id="editCaseForm" name="editCaseForm" role="form" submit.delegate="update(data[\'id\'])"><input type="hidden" name="_token" value.bind="data[\'token\']"> <input type="hidden" id="id" value.bind="data[\'case\'][\'id\']" name="data[id]"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading"><div class="personHeading"><span>Case</span> <span class="submitContainer float-right"><button if.bind="user.role !== \'facilitator\'" class="btn btn-default btn-success edit-button show-button" click.delegate="edit()">Edit Case</button> <button if.bind="user.role !== \'facilitator\'" class="btn btn-default btn-danger update-button" type="submit">Update Case</button> <button if.bind="user.role === \'admin\' || user.role === \'caseadmin\'" class="btn btn-default btn-danger edit-button show-button" click.delegate="showDeleteModal()">Delete</button></span></div></div><div class="panel-body"><div repeat.for="item of caseFieldData"><require from="ObjectKeysValueConverter"></require><div><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="$index % 3 == 0 && $index !== 0"></div><div if.bind="prop.type == \'input\'"><div class="col-sm-4"><div><label for="${prop.name}">${prop.namePretty}</label></div><div><span class="inputField"><input type="text" name="${prop.name}" id="${prop.name}" value.bind="data[prop.name]" placeholder="${prop.placeholder}" data-date="${prop.date}" readonly="readonly"></span></div></div></div><div if.bind="prop.type  == \'select\'"><div class="col-sm-4 inputContainer"><div><label for="${prop.name}">${prop.namePretty}</label></div><div class="inputField"><select name="${prop.name}" id="${prop.name}" value.bind="data[prop.name]" disabled="disabled"><option repeat.for="option of prop.options | objectKeys" value="${option.value}">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="col-sm-6"><div><label for="${prop.name}">${prop.namePretty}</label></div><span class="inputField textAreaField"><textarea rows="10" name="caseFieldData[case][${prop.name}]" id="${prop.name}" value.bind="data[prop.name]" readonly="readonly"></textarea></span></div></div></div><div class="clearfix"></div><div class="col-sm-6"><div class="charge-select-wrapper"><div class="charge-select2-container"><require from="resources/custom-select"></require><div><label for="charges">Charge(s):</label></div><div class="inputField"><select disabled="true" id="charges" class="chargeSelect" select2.bind="options" value.bind="data[\'charges\']" selected.bind="selectedCharge" multiple="multiple" name="data[charge][]"><option repeat.for="charge of charges" model.bind="charge.id" id="${charge.id}" value="${charge.id}">${charge.charges}</option></select></div></div></div></div><div class="col-sm-3"><div class="facilitator-select-wrapper"><div class="facilitator-select2-container"><require from="resources/custom-select"></require><div><label for="facilitators">Facilitator(s):</label></div><div class="inputField"><select disabled="true" id="facilitators" class="facilitatorSelect" select2.bind="options" value.bind="data[\'facilitators\']" selected.bind="selectedFacilitator" multiple="multiple" name="data[facilitator][]"><option repeat.for="facilitator of facilitators" model.bind="facilitator.id" id="${facilitator.id}" value="${facilitator.id}">${facilitator.username}</option></select></div></div></div></div></div></div></div></div></div></div><div id="victimSection"><section id="victim"><div if.bind="data.victims.length !== 0" repeat.for="victim of data.victims"><div class="index" style="visibility: hidden">${$parentIndex = $index}</div><div repeat.for="item of victimFieldData"><div id="victim-${$parentIndex}" class="panel panel-default"><div class="panel-heading"><span>Victim ${$parentIndex + 1}</span> <span if.bind="victim.participating === \'Yes\' && victim.bestContact === \'Yes\'" class="float-right"><i class="fa fa-star" aria-hidden="true" style="color: #ffff00"></i></span></div><div class="panel-body"><div class="row"><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="prop.clearfix == \'true\'"></div><div class="col-sm-4"><div if.bind="prop.type !== \'textarea\'"><label for="victim-${prop.name}-${$parentIndex}">${prop.namePretty}:</label></div><div><div class="inputField" if.bind="prop.type  == \'input\'"><input type="text" name="victim-${prop.name}" id="victim-${prop.name}-${$parentIndex}" value.bind="data[\'victims\'][$parentIndex][prop.name]" placeholder="${prop.placeholder}" data-date="${prop.date}" readonly="readonly"></div><div class="inputField" if.bind="prop.type  == \'select\'"><select name="victim-${prop.name}" id="victim-${prop.name}-${$parentIndex}" value.bind="data[\'victims\'][$parentIndex][prop.name]" disabled="disabled"><option repeat.for="option of prop.options | objectKeys">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6"><div><label for="${prop.name}">${prop.namePretty}:</label></div><span class="inputField textAreaField"><textarea rows="10" name="victim-{prop.name}" id="victim-${prop.name}-${$parentIndex}" value.bind="data[\'victims\'][$parentIndex][prop.name]" readonly="readonly"></textarea></span></div></div></div></div></div></div></div></div></section></div><div id="offenderSection"><section id="offender"><div if.bind="data.offenders.length !== 0" repeat.for="offender of data.offenders"><div class="index" style="visibility: hidden">${$parentIndex = $index}</div><div repeat.for="item of offenderFieldData"><div id="offender-${$parentIndex}" class="panel panel-default"><div class="panel-heading">Offender ${$parentIndex + 1}</div><div class="panel-body"><div class="row"><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="prop.clearfix == \'true\'"></div><div class="col-sm-4"><div if.bind="prop.type !== \'textarea\'"><label for="offender-${prop.name}-${$parentIndex}">${prop.namePretty}:</label></div><div><div class="inputField" if.bind="prop.type  == \'input\'"><input type="text" name="offender-${prop.name}" id="offender-${prop.name}-${$parentIndex}" value.bind="data[\'offenders\'][$parentIndex][prop.name]" placeholder="${prop.placeholder}" data-date="${prop.date}" readonly="readonly"></div><div class="inputField" if.bind="prop.type  == \'select\'"><select name="offender-${prop.name}" id="offender-${prop.name}-${$parentIndex}" value.bind="data[\'offenders\'][$parentIndex][prop.name]" disabled="disabled"><option repeat.for="option of prop.options | objectKeys">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6"><div><label for="${prop.name}">${prop.namePretty}:</label></div><span class="inputField textAreaField"><textarea rows="10" name="offender-{prop.name}" id="offender-${prop.name}-${$parentIndex}" value.bind="data[\'offenders\'][$parentIndex][prop.name]" readonly="readonly"></textarea></span></div></div></div></div></div></div></div></div></section></div></form><div id="fileSection"><div class="loader fileloaderOverlay" show.bind="fileLoaderOverlay"><div class="spinner"><i class="fa fa-spinner fa-pulse fa-3x icon-white"></i></div></div><div class="alert alert-success" role="alert" show.bind="fileSuccess">Uploaded Successfully!</div><form id="fileUploadForm" name="fileUploadForm" role="form" submit.delegate="fileUpload()" accept-charset="UTF-8" enctype="multipart/form-data" method="post"><require from="FileListToArrayValueConverter"></require><div class="panel panel-default"><div class="panel-heading">Case Files</div><div class="panel-body"><input type="hidden" id="id" value.bind="data[id]" name="data[id]"><div class="row"><div class="fileError"></div><div class="col-sm-4"><input type="file" multiple="multiple" files.bind="selectedFiles"> <button type="submit" class="btn btn-lg btn-default btn-warning">Upload</button></div><div class="col-sm-8"><table id="filesTable" class="table"><thead><tr><th>File Name</th><th>Action</th></tr></thead><tbody><tr repeat.for="file of uploadedFiles | fileListToArray"><td>${file.filename}</td><td><a href="/uploads/${file.filename}" download><span class="btn btn-success">Download</span></a> <span if.bind="user.role !== \'facilitator\'"><a click.delegate="deleteFile(file.id, $index)"><span class="btn btn-danger">Delete</span></a></span></td></tr></tbody></table></div></div></div></div></form></div><div id="noteSection"><div class="alert alert-success" role="alert" show.bind="noteSuccess">Note Added Successfully!</div><form id="noteForm" name="noteForm" role="form" submit.delegate="addNote()" method="post"><div class="panel panel-default"><div class="panel-heading">Add Note</div><div class="panel-body"><input type="hidden" type="text" value.bind="data[id]" name="data[id]"><div class="row"><div class="col-sm-12"><div class="row"><div class="col-sm-3"><div><label for="noteDate">Note Date:</label></div><span class="inputField"><input type="text" id="noteDate" value.bind="noteData.noteDate" name="noteDate" data-date="true" placeholder="MM/DD/YYYY"></span></div><div class="col-sm-3"><div><label for="noteContactType">Note Type:</label></div><div repeat.for="item of noteFieldData"><div repeat.for="prop of item | objectKeys"><span class="inputField"><require from="ObjectKeysValueConverter"></require><select name="noteContactType" id="noteContactType" value.bind="noteData.noteContactType"><option repeat.for="option of prop.options | objectKeys" value="${option.value}">${option.name}</option></select></span></div></div></div></div><div class="row"><div class="col-sm-6"><div><label for="noteContent">Note Content:</label></div><span class="inputField textAreaField"><textarea rows="10" id="noteContent" value.bind="noteData.noteContent" name="noteContent"></textarea></span></div></div><button type="submit" class="btn btn-lg btn-default btn-info">Add Note</button></div></div></div></div></form><div class="panel panel-default"><div class="panel-heading">Case Notes</div><div class="panel-body"><div class="col-sm-12"><table id="notesTable" class="table"><thead><tr><th class="col-sm-2">Added By</th><th class="col-sm-2">Note Date</th><th class="col-sm-2">Note Type</th><th>Note Contents</th></tr></thead><tbody><tr repeat.for="note of notes"><td><div>${note.userName}</div></td><td><div if.bind="user.role == \'facilitator\'">${note.noteDate}</div><div if.bind="user.role !== \'facilitator\'"><a class="editableInput" data-index="${$index}" data-name="noteDate" data-date="true">${note.noteDate}</a> <input class="inlineEdit hide" name="noteDate" type="text" value="${note.noteDate}"></div></td><td><div if.bind="user.role == \'facilitator\'">${note.noteContactType}</div><div if.bind="user.role !== \'facilitator\'"><a class="editableInput" data-index="${$index}" data-name="noteContactType">${note.noteContactType}</a> <input class="inlineEdit hide" name="noteContactType" type="text" value="${note.noteContactType}"></div></td><td><div if.bind="user.role == \'facilitator\'">${note.noteContent}</div><div if.bind="user.role !== \'facilitator\'"><a class="editableInput" data-index="${$index}" data-name="noteContent">${note.noteContent}</a><textarea rows="10" class="inlineEdit hide" name="noteContent" type="text" value="${note.noteContent}"></textarea></div></td></tr></tbody></table></div></div></div></div></div><div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="deleteModalLabel">Delete Case</h4></div><div class="modal-body"><h1>Are you sure you want to delete this case?</h1><p>This will also delete any notes and files attached to the case. Victims and Offenders will no longer be assigned to the case, but not deleted</p><p>To delete a Victim or Offender, navigate to the Edit page for that specific person.</p><div class="text-center"><button class="btn btn-default btn-danger" click.delegate="delete(data[\'id\'])">Delete</button></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div></div></div></div></template>'})}(),System.register("edit-case.js",["aurelia-framework","aurelia-http-client","aurelia-router","jquery-validation","moment","datatables"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.Router},function(a){g=a["default"]},function(a){h=a["default"]},function(a){i=a["default"]}],execute:function(){j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a("EditCase",(k=d(e,f),m=k(l=function(){function a(b,d){c(this,a),this.http=b,this.router=d}return a.prototype.activate=function(a){var b=this;return this.isLoading=0,this.user=userObj,this.data=[],this.noteData={},this.notes=[],this.uploadedFiles=[],this.charges=[],this.facilitators=[],this.selectedCharge=[],this.selectedFacilitator=[],this.selectedCaseClose=[],this.selectedCaseManager=[],this.loaderOverlay=0,this.fileLoaderOverlay=0,this.caseSuccess=0,this.fileSuccess=0,this.noteSuccess=0,this.childIndex=0,this.caseFieldData=[],this.noteFieldData=[],this.selectedNoteContactType=[],this.offenderFieldData=[],this.selectedFiles=[],this.http.get("/api/cases/"+a.id+"/edit").then(function(a){if(b.data=a.content.data,b.uploadedFiles=b.data.files,b.notes=b.data.notes,b.data.caseClose=null!==a.content.data.caseClose?a.content.data.caseClose.toString():"",b.data.user_id=null!==a.content.data.user_id?a.content.data.user_id.toString():"",b.notes)for(var c=0;c<b.notes.length;c++)b.notes[c].noteDate=h(b.notes[c].noteDate).format("L");b.charges=a.content.chargesData,b.facilitators=a.content.facilitatorData;for(var c=0;c<b.data.charges.length;c++)b.selectedCharge.push(b.data.charges[c].id);for(var c=0;c<b.data.users.length;c++)b.selectedFacilitator.push(b.data.users[c].id);b.caseFieldData=[a.content.caseFieldData],b.victimFieldData=[a.content.victimFieldData],b.offenderFieldData=[a.content.offenderFieldData],b.noteFieldData=[a.content.noteFieldData]})},a.prototype.update=function(a){this.loaderOverlay=1;this.http.put("/api/cases/"+a,this.data).then(function(a){window.location.reload(!0)})},a.prototype.disableForm=function(){$("#editCaseForm input, #editCaseForm textarea").attr("readonly","readonly"),$("#editCaseForm select").attr("disabled","disabled"),$(".edit-button").addClass("show-button"),$(".update-button").removeClass("show-button")},a.prototype.edit=function(){"facilitator"!==userObj.role&&($("input[readonly], textarea[readonly]").removeAttr("readonly","readonly"),$("select[disabled]").removeAttr("disabled"),$(".edit-button").removeClass("show-button"),$(".update-button").addClass("show-button"))},a.prototype.showDeleteModal=function(){$("#deleteModal").modal("show")},a.prototype["delete"]=function(a){var b=this;this.loaderOverlay=1;var c=this;this.http["delete"]("/api/cases/"+a).then(function(a){c.loaderOverlay=0,$("#deleteModal").modal("hide"),b.router.navigateToRoute("cases")})},a.prototype.fileUpload=function(){function a(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null}this.fileData=new FormData,this.fileData.append("file",this.selectedFiles[0]);var b=this;b.fileLoaderOverlay=1,$.ajax({url:"/api/file-upload?id="+this.data.id,type:"POST",beforeSend:function(b){b.setRequestHeader("X-CSRF-TOKEN",a("XSRF-TOKEN"))},data:this.fileData,cache:!1,dataType:"json",processData:!1,contentType:!1,complete:function(a){b.fileLoaderOverlay=0,b.fileSuccess=1,b.uploadedFiles.push(a.responseJSON.file),$("form[name='fileUploadForm']").trigger("reset"),setTimeout(function(){b.fileSuccess=0},3e3)}})},a.prototype.addNote=function(a){var b=this;this.http.post("/api/note?id="+a,this.noteData).then(function(a){console.log(a),b.showNoteSuccess(),a.content.note.noteDate=h(a.content.note.noteDate).format("L"),b.notes.push(a.content.note)})},a.prototype.showNoteSuccess=function(){var a=this;a.noteSuccess=1,setTimeout(function(){a.noteSuccess=0,$("#noteForm")[0].reset()},2e3)},a.prototype.setupCaseValidation=function(){var a,b=this;$.validator.addMethod("dateFormat",function(a,b){return""==a||null==a||a.match(/^\d{2}\/\d{2}\/\d{4}$/)},"Please enter a date in the format MM/DD/YYYY"),$.validator.addMethod("states",function(a,b){return a.match(/^(?:(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]))$/)},"Please enter a state in two letters, e.g., KY"),$("#noteForm").validate({rules:{noteDate:{required:!0,dateFormat:!0},noteContent:{required:!0},noteContactType:{required:!0}},messages:{},submitHandler:function(a){b.addNote(b.data.id)}}),$("#editCaseForm").validate({onkeyup:!1,rules:(a={caseId:{required:!0},victimId:{required:!0},offenderId:{required:!0},caseStatus:{required:!0},courtDate:{required:!0,dateFormat:!0},charge:{required:!0},dateOfCharge:{required:!0,dateFormat:!0},dateClosed:{dateFormat:!0},dateOfReferral:{required:!0,dateFormat:!0},email:{email:!0},firstName:{required:!0},lastName:{required:!0},dateOfBirth:{required:!0,dateFormat:!0},streetAddress:{required:!0},city:{required:!0},state:{states:!0},zipCode:{required:!0},phoneOne:{required:!0},phoneOneType:{required:!0},phoneTwo:{}},a.zipCode={required:!0},a),messages:{},submitHandler:function(a){b.update(b.data.id)}})},a.prototype.parseDates=function(){for(var a=$('body [data-date="true"]'),b=0;b<a.length;b++){console.log("hello");var c=$(a[b]),d=c.val();if(""!==d){var e=h(d).format("L");c.val(e)}}},a.prototype.setupEditableTable=function(){var a=this;$("#notesTable").on("click",".editableInput",function(b){$(this).addClass("hide");var c=$(this).next();c.removeClass("hide"),$(c).focus();var d=this.dataset.index,e=this.dataset.name,f=a.notes[d].id;$(c).keydown(function(b){var c=this;if(27==b.which){$(this).addClass("hide");var g=$(this).prev();g.removeClass("hide")}else if(13==b.which){var i=function(){var b=function(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null};return $.ajax({url:"/api/note/"+f,context:c,method:"PUT",data:{name:e,value:c.value},dataType:"json",beforeSend:function(a){a.setRequestHeader("X-CSRF-TOKEN",b("XSRF-TOKEN"))}}).done(function(b){$(this).addClass("hide");var c=$(this).prev(),f=1==c.data().date;f&&(b.note[e]=h(b.note[e]).format("L")),c.removeClass("hide");var g=a.notes[d];g[e]=b.note[e]}),{v:!1}}();if("object"===("undefined"==typeof i?"undefined":j(i)))return i.v}})})},a.prototype.deleteFile=function(a,b){function c(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null}var d=this;$.ajax({url:"/api/file-upload/"+a,context:this,method:"DELETE",dataType:"json",beforeSend:function(a){a.setRequestHeader("X-CSRF-TOKEN",c("XSRF-TOKEN"))}}).done(function(a){d.uploadedFiles.splice(b,1)})},a.prototype.attached=function(){$(".charge-select2-container .chargeSelect").val(this.selectedCharge).trigger("change"),$(".facilitator-select2-container .facilitatorSelect").val(this.selectedFacilitator).trigger("change"),$("#edit").on("select2:open",function(){console.log("open")}),this.parseDates(),this.setupCaseValidation(),this.setupEditableTable()},a}())||l)),a("EditCase",m)}}}),function(){var a=System.amdDefine;a("edit-offender.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div id="edit"><form id="editOffenderForm" name="editOffenderForm" role="form" submit.delegate="update(data[\'id\'])"><input type="hidden" name="_token" value.bind="data[\'token\']" ]> <input type="hidden" id="id" value.bind="data[\'offender\'][\'id\']" name="data[id]"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading"><div class="personHeading"><span>Offender</span> <span class="submitContainer float-right"><button if.bind="user.role !== \'facilitator\'" class="btn btn-default btn-success edit-button show-button" click.delegate="edit()">Edit Offender</button> <button if.bind="user.role !== \'facilitator\'" class="btn btn-default btn-danger update-button" type="submit">Update Offender</button> <button if.bind="user.role === \'admin\' || user.role === \'caseadmin\'" class="btn btn-default btn-danger edit-button show-button" click.delegate="showDeleteModal()">Delete</button></span></div></div><div class="panel-body"><div repeat.for="item of offenderFieldData"><require from="ObjectKeysValueConverter"></require><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="prop.clearfix == \'true\'"></div><div class="col-sm-4"><div><label for="offender-${prop.name}">${prop.namePretty}:</label></div><div><div class="inputField" if.bind="prop.type  == \'input\'"><input type="text" name="${prop.name}" id="offender-${prop.name}" value.bind="data[prop.name]" placeholder="${prop.placeholder}" data-date="${prop.date}" readonly="readonly"></div><div class="inputField" if.bind="prop.type  == \'select\'"><select name="${prop.name}" id="offender-${prop.name}" value.bind="data[prop.name]" disabled="disabled"><option repeat.for="option of prop.options | objectKeys">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6"><div if.bind="prop.type !== \'textarea\'"><label for="offender-${prop.name}">${prop.namePretty}:</label></div><span class="inputField textAreaField"><textarea rows="10" name="${prop.name}" id="offender-${prop.name}" value.bind="data[prop.name]" readonly="readonly"></textarea></span></div></div></div></div></div></div></div></div><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading">Charge</div><div class="panel-body"><div class="col-sm-3"><div class="case-select-wrapper"><div class="case-select2-container"><require from="resources/custom-select"></require><div><label for="cases">Case(s):</label></div><div class="inputField"><select disabled="true" id="cases" class="caseSelect" select2.bind="options" value.bind="data[\'cases\']" selected.bind="selectedCase" multiple="multiple" name="data[case][]"><option repeat.for="case of cases" model.bind="case.id" id="${case.id}" value="${case.id}">${case.caseId}</option></select></div></div></div></div></div></div></div></div></form></div><div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="deleteModalLabel">Delete Offender</h4></div><div class="modal-body"><h1>Are you sure you want to delete this offender?</h1><div class="text-center"><button class="btn btn-default btn-danger" click.delegate="delete(data[\'id\'])">Delete</button></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div></div></div></div></template>'})}(),System.register("edit-offender.js",["aurelia-framework","aurelia-http-client","aurelia-router","jquery-validation","moment"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.Router},function(a){g=a["default"]},function(a){h=a["default"]}],execute:function(){a("EditOffender",(i=d(e,f),k=i(j=function(){function a(b,d){c(this,a),this.http=b,this.router=d}return a.prototype.activate=function(a){var b=this;return this.data=[],this.cases=[],this.selectedCase=[],this.childIndex=0,this.selectedFiles=[],this.http.get("/api/offender/"+a.id+"/edit").then(function(a){b.data=a.content.data,b.cases=a.content.casesData;for(var c=0;c<b.data.rj_cases.length;c++)b.selectedCase.push(b.data.rj_cases[c].id);b.offenderFieldData=[a.content.offenderFieldData]})},a.prototype.update=function(a){this.http.put("/api/offender/"+a,this.data).then(function(a){window.location.reload(!0)})},a.prototype.edit=function(){$("input[readonly], textarea[readonly]").removeAttr("readonly"),$("select[disabled]").removeAttr("disabled"),$(".editOverlay").remove(),$(".inputField, .select2-container").removeClass("showEditIcon").unbind("mouseenter mouseleave"),$(".edit-button").removeClass("show-button"),$(".update-button").addClass("show-button")},a.prototype.setupOffenderValidation=function(){var a,b=this;$.validator.addMethod("dateFormat",function(a,b){return a.match(/^\d{2}\/\d{2}\/\d{4}$/)},"Please enter a date in the format MM/DD/YYYY"),$.validator.addMethod("states",function(a,b){return a.match(/^(?:(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]))$/)},"Please enter a state in two letters, e.g., KY"),$("#editOffenderForm").validate({onkeyup:!1,rules:(a={caseId:{required:!0},offenderId:{required:!0}},a.offenderId={required:!0},a.caseStatus={required:!0},a.courtDate={required:!0,dateFormat:!0},a.charge={required:!0},a.dateOfCharge={required:!0,dateFormat:!0},a.dateClosed={dateFormat:!0},a.dateOfReferral={required:!0,dateFormat:!0},a.email={email:!0},a.firstName={required:!0},a.lastName={required:!0},a.dateOfBirth={required:!0,dateFormat:!0},a.streetAddress={required:!0},a.city={required:!0},a.state={states:!0},a.zipCode={required:!0},a.phoneOne={required:!0},a.phoneOneType={required:!0},a.phoneTwo={},a.zipCode={required:!0},a),messages:{},submitHandler:function(a){b.update(b.data.id)}})},a.prototype.parseDates=function(){for(var a=$('body [data-date="true"]'),b=0;b<a.length;b++){console.log("hello");var c=$(a[b]),d=c.val();if(""!==d){var e=h(d).format("L");c.val(e)}}},a.prototype.attached=function(){$(".case-select2-container .caseSelect").val(this.selectedCase).trigger("change"),$("#edit").on("select2:open",function(){console.log("open")}),this.parseDates(),this.setupOffenderValidation()},a.prototype.showDeleteModal=function(){$("#deleteModal").modal("show")},a.prototype["delete"]=function(a){var b=this;this.loaderOverlay=1;var c=this;this.http["delete"]("/api/offender/"+a).then(function(a){c.loaderOverlay=0,$("#deleteModal").modal("hide"),b.router.navigateToRoute("offenders")})},a}())||j)),a("EditOffender",k)}}}),function(){var a=System.amdDefine;a("edit-victim.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div id="edit"><form id="editVictimForm" name="editVictimForm" role="form" submit.delegate="update(data[\'id\'])"><input type="hidden" name="_token" value.bind="data[\'token\']"> <input type="hidden" id="id" value.bind="data[\'victim\'][\'id\']" name="data[id]"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading"><div class="personHeading"><span>Victim</span> <span class="submitContainer float-right"><button if.bind="user.role !== \'facilitator\'" class="btn btn-default btn-success edit-button show-button" click.delegate="edit()">Edit Victim</button> <button if.bind="user.role !== \'facilitator\'" class="btn btn-default btn-danger update-button" type="submit">Update Victim</button> <button if.bind="user.role === \'admin\' || user.role === \'caseadmin\'" class="btn btn-default btn-danger edit-button show-button" click.delegate="showDeleteModal()">Delete</button></span></div></div><div class="panel-body"><div repeat.for="item of victimFieldData"><require from="ObjectKeysValueConverter"></require><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="prop.clearfix == \'true\'"></div><div class="col-sm-4"><div if.bind="prop.type !== \'textarea\'"><label for="victim-${prop.name}">${prop.namePretty}:</label></div><div><div class="inputField" if.bind="prop.type  == \'input\'"><input type="text" name="${prop.name}" id="victim-${prop.name}" value.bind="data[prop.name]" placeholder="${prop.placeholder}" data-date="${prop.date}" readonly="readonly"></div><div class="inputField" if.bind="prop.type  == \'select\'"><select name="${prop.name}" id="victim-${prop.name}" value.bind="data[prop.name]" disabled="disabled"><option repeat.for="option of prop.options | objectKeys">${option.name}</option></select></div></div></div><div if.bind="prop.type == \'textarea\'"><div class="clearfix"></div><div class="col-sm-6"><div><label for="offender-${prop.name}">${prop.namePretty}:</label></div><span class="inputField textAreaField"><textarea rows="10" name="${prop.name}" id="offender-${prop.name}" value.bind="data[prop.name]" readonly="readonly"></textarea></span></div></div></div></div></div></div></div></div><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading">Charge</div><div class="panel-body"><div class="col-sm-3"><div class="case-select-wrapper"><div class="case-select2-container"><require from="resources/custom-select"></require><div><label for="cases">Case(s):</label></div><div class="inputField"><select disabled="true" id="cases" class="caseSelect" select2.bind="options" value.bind="data[\'cases\']" selected.bind="selectedCase" multiple="multiple" name="data[case][]"><option repeat.for="case of cases" model.bind="case.id" id="${case.id}" value="${case.id}">${case.caseId}</option></select></div></div></div></div></div></div></div></div></form></div><div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="deleteModalLabel">Delete Victim</h4></div><div class="modal-body"><h1>Are you sure you want to delete this victim?</h1><div class="text-center"><button class="btn btn-default btn-danger" click.delegate="delete(data[\'id\'])">Delete</button></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button></div></div></div></div></template>';
})}(),System.register("edit-victim.js",["aurelia-framework","aurelia-http-client","aurelia-router","jquery-validation","moment"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.Router},function(a){g=a["default"]},function(a){h=a["default"]}],execute:function(){a("EditVictim",(i=d(e,f),k=i(j=function(){function a(b,d){c(this,a),this.http=b,this.router=d}return a.prototype.activate=function(a){var b=this;return this.data=[],this.cases=[],this.selectedCase=[],this.childIndex=0,this.selectedFiles=[],this.http.get("/api/victim/"+a.id+"/edit").then(function(a){b.data=a.content.data,b.cases=a.content.casesData;for(var c=0;c<b.data.rj_cases.length;c++)b.selectedCase.push(b.data.rj_cases[c].id);b.victimFieldData=[a.content.victimFieldData]})},a.prototype.update=function(a){this.http.put("/api/victim/"+a,this.data).then(function(a){window.location.reload(!0)})},a.prototype.edit=function(){$("input[readonly], textarea[readonly]").removeAttr("readonly"),$("select[disabled]").removeAttr("disabled"),$(".editOverlay").remove(),$(".inputField, .select2-container").removeClass("showEditIcon").unbind("mouseenter mouseleave"),$(".edit-button").removeClass("show-button"),$(".update-button").addClass("show-button")},a.prototype.setupVictimValidation=function(){var a,b=this;$.validator.addMethod("dateFormat",function(a,b){return a.match(/^\d{2}\/\d{2}\/\d{4}$/)},"Please enter a date in the format MM/DD/YYYY"),$.validator.addMethod("states",function(a,b){return a.match(/^(?:(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]))$/)},"Please enter a state in two letters, e.g., KY"),$("#editVictimForm").validate({onkeyup:!1,rules:(a={caseId:{required:!0},victimId:{required:!0},offenderId:{required:!0},caseStatus:{required:!0},courtDate:{required:!0,dateFormat:!0},charge:{required:!0},dateOfCharge:{required:!0,dateFormat:!0},dateClosed:{dateFormat:!0},dateOfReferral:{required:!0,dateFormat:!0},email:{email:!0},firstName:{required:!0},lastName:{required:!0},dateOfBirth:{dateFormat:!0},streetAddress:{required:!0},city:{required:!0},state:{states:!0},zipCode:{required:!0},phoneOne:{required:!0},phoneOneType:{required:!0},phoneTwo:{}},a.zipCode={required:!0},a),messages:{},submitHandler:function(a){b.update(b.data.id)}})},a.prototype.parseDates=function(){for(var a=$('body [data-date="true"]'),b=0;b<a.length;b++){console.log("hello");var c=$(a[b]),d=c.val();if(""!==d){var e=h(d).format("L");c.val(e)}}},a.prototype.attached=function(){$(".case-select2-container .caseSelect").val(this.selectedCase).trigger("change"),$("#edit").on("select2:open",function(){console.log("open")}),this.parseDates(),this.setupVictimValidation()},a.prototype.showDeleteModal=function(){$("#deleteModal").modal("show")},a.prototype["delete"]=function(a){var b=this;this.loaderOverlay=1;var c=this;this.http["delete"]("/api/victim/"+a).then(function(a){c.loaderOverlay=0,$("#deleteModal").modal("hide"),b.router.navigateToRoute("victims")})},a}())||j)),a("EditVictim",k)}}}),function(){var a=System.amdDefine;a("home.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="./child-nav-bar.html"></require><child-nav-bar router.bind="router"></child-nav-bar></template>'})}(),System.register("home.js",["aurelia-framework","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient}],execute:function(){a("Home",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.http=b}return a.prototype.configureRouter=function(a,b){a.map([{route:["","cases/view"],moduleId:"view-case",nav:!0,title:"Case View"},{route:["create"],moduleId:"create-case",nav:!0,title:"Case Create"},{route:["edit"],moduleId:"edit-case",nav:!1,title:"Edit Case"}])},a.prototype.activate=function(){},a.prototype.attached=function(){},a}())||g)),a("Home",h)}}}),System.register("main.js",["bootstrap"],function(a,b){function c(a){a.use.standardConfiguration().developmentLogging(),a.start().then(function(a){return a.setRoot("app")})}return a("configure",c),{setters:[function(a){}],execute:function(){}}}),function(){var a=System.amdDefine;a("nav-bar.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="mobile-menu-overlay hide"></div><div class="mobile-menu-bars"><a click.delegate="openNav()"><i class="fa fa-bars fa-2x"></i></a></div><nav id="navbar-app" class="col-sm-2" role="navigation"><ul><li><div class="col-sm-4 nav-item"><div><i class="fa fa-user fa-2x"></i></div></div><div class="col-sm-8 nav-item-title"><a>Hello ${router.title.username}!</a></div></li><li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}"><div class="col-sm-4 nav-item"><div if.bind="row.title == \'Home\'"><i class="fa fa-home fa-2x"></i></div><div if.bind="row.title == \'Cases\'"><i class="fa fa-suitcase fa-2x"></i></div><div if.bind="row.title == \'Victims\'"><i class="fa fa-user fa-2x"></i></div><div if.bind="row.title == \'Offenders\'"><i class="fa fa-user fa-2x"></i></div><div if.bind="row.title == \'Users\'"><i class="fa fa-users fa-2x"></i></div><div if.bind="row.title == \'Admin\'"><i class="fa fa-lock fa-2x"></i></div></div><div class="col-sm-8 nav-item-title"><a href.bind="row.href">${row.title}</a></div></li><li><div class="col-sm-4 nav-item"><i class="fa fa-sign-out fa-2x"></i></div><div class="col-sm-8 nav-item-title"><a href="/logout">Logout</a></div></li></ul><div class="loader loaderOverlay" if.bind="router.isNavigating"><div class="spinner"><i class="fa fa-spinner fa-pulse fa-3x icon-white"></i></div></div></nav></template>'})}(),System.register("nav-bar.js",["aurelia-router"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.Router}],execute:function(){a("NavBar",e=function(){function a(b){var d=this;c(this,a),this.router=b;var e=[];if("undefined"!=typeof userObj)if("admin"==userObj.role||"caseadmin"==userObj.role)var e=[{route:["cases/"],name:"cases",moduleId:"cases",nav:!1,title:"Cases"},{route:["victim/"],name:"victims",moduleId:"victims",nav:!1,title:"Victims"},{route:["offender/"],name:"offenders",moduleId:"offenders",nav:!1,title:"Offenders"},{route:["users/"],moduleId:"users",nav:!1,title:"Users"},{route:["admin/"],moduleId:"admin",nav:!1,title:"Admin"}];else if("facilitator"!==userObj.role)var e=[{route:["cases/"],moduleId:"cases",nav:!1,title:"Cases"},{route:["victim/"],moduleId:"victims",nav:!1,title:"Victims"},{route:["offender/"],moduleId:"offenders",nav:!1,title:"Offenders"},{route:["users/"],moduleId:"users",nav:!1,title:"Users"}];else if("facilitator"==userObj.role)var e=[{route:["cases/"],moduleId:"cases",nav:!1,title:"Cases"}];this.router.configure(function(a){a.title=d.user,a.parent="true",a.map(e)})}return a.inject=function(){return[d]},a.prototype.openNav=function(){var a=$("#navbar-app"),b=$(".mobile-menu-overlay");a.hasClass("show-menu")?(a.removeClass("show-menu"),b.addClass("hide")):(a.addClass("show-menu"),b.removeClass("hide"))},a}()),a("NavBar",e)}}}),function(){var a=System.amdDefine;a("offenders.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="./child-nav-bar.html"></require><child-nav-bar router.bind="router"></child-nav-bar></template>'})}(),System.register("offenders.js",["aurelia-framework","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient}],execute:function(){a("Offenders",(f=d(e),h=f(g=function(){function a(b){function d(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null}c(this,a),this.http=b.configure(function(a){a.withHeader("X-CSRF-TOKEN",d("XSRF-TOKEN"))})}return a.prototype.configureRouter=function(a,b){a.map([{route:["","offender/view/"],moduleId:"view-offenders",nav:!0,title:"Offender View"},{route:["create"],moduleId:"create-offender",nav:!0,title:"Offender Create"},{route:["edit"],name:"edit-offender",moduleId:"edit-offender",nav:!1,title:"Offender Edit"}]),this.router=b},a}())||g)),a("Offenders",h)}}}),System.register("resources/custom-select.js",["aurelia-framework","select2"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.customAttribute,e=a.inject},function(a){f=a["default"]}],execute:function(){a("Select2CustomAttribute",(g=d("select2"),h=e(Element),j=g(i=h(i=function(){function a(b){c(this,a),this.element=b}return a.prototype.attached=function(){var a=this;$(this.element).select2(this.value).on("change",function(b){b.originalEvent||a.element.dispatchEvent(new Event("change"))})},a.prototype.detached=function(){$(this.element).select2("destroy")},a}())||i)||i)),a("Select2CustomAttribute",j)}}}),function(){var a=System.amdDefine;a("tabs.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><ul><li repeat.for="tab of tabs"><a href="${\'#\' + $parent.id + \'-\' + $index}">${tab.title}</a></li></ul><div repeat.for="tab of tabs" id="${$parent.id + \'-\' + $index}"><p>${tab.text}</p></div></template>'})}(),System.register("tabs.js",["aurelia-framework","jquery","jquery-ui"],function(a,b){function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n;return{setters:[function(a){f=a.bindable,g=a.inject},function(a){h=a["default"]},function(a){i=a.tabs}],execute:function(){a("Tab",(j=g(Element),n=j((l=function(){function a(b){d(this,a),c(this,"tabs",m,this),this.id=b.id}return a.prototype.attached=function(){h("#"+this.id).tabs()},a}(),m=e(l.prototype,"tabs",[f],{enumerable:!0,initializer:function(){return null}}),k=l))||k)),a("Tab",n)}}}),function(){var a=System.amdDefine;a("user-edit.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div id="edit"><form id="editUserForm" name="editUserForm" role="form" submit.delegate="update(data[\'id\'])"><input type="hidden" name="_token" value.bind="data[\'token\']"> <input type="hidden" id="id" value.bind="data[\'User\'][\'id\']" name="data[id]"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading"><div class="personHeading"><span>User</span> <span class="submitContainer float-right"><button if.bind="user.role !== \'facilitator\'" class="btn btn-default btn-success edit-button show-button" click.delegate="edit()">Edit User</button> <button if.bind="user.role !== \'facilitator\'" class="btn btn-default btn-danger update-button" type="submit">Update User</button></span></div></div><div class="panel-body"><div repeat.for="item of userFieldData"><require from="ObjectKeysValueConverter"></require><div repeat.for="prop of item | objectKeys"><div class="clearfix" if.bind="$index % 3 == 0 && $index !== 0"></div><div class="col-sm-4"><div><label for="User-${prop.name}">${prop.namePretty}:</label></div><div><div class="inputField" if.bind="prop.type  == \'input\'"><input type="text" name="${prop.name}" id="User-${prop.name}" value.bind="data[prop.name]" placeholder="${prop.placeholder}" readonly="readonly"></div><div class="inputField" if.bind="prop.type  == \'email\'"><input type="email" name="${prop.name}" id="User-${prop.name}" value.bind="data[prop.name]" placeholder="${prop.placeholder}" readonly="readonly"></div><div class="inputField" if.bind="prop.type  == \'select\'"><div class="editOverlay"></div><select name="${prop.name}" id="User-${prop.name}" value.bind="data[prop.name]" disabled="disabled"><option repeat.for="option of prop.options | objectKeys" value="${option.value}">${option.name}</option></select></div></div></div></div></div></div></div></div></div></form></div></template>'})}(),System.register("user-edit.js",["aurelia-framework","aurelia-http-client","aurelia-router","jquery-validation"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.Router},function(a){g=a["default"]}],execute:function(){a("EditUser",(h=d(e,f),j=h(i=function(){function a(b,d){c(this,a),this.http=b,this.router=d}return a.prototype.activate=function(a){var b=this;return this.http.get("/api/user/"+a.id+"/edit").then(function(a){b.data=a.content.data,b.userFieldData=[a.content.userFieldData]})},a.prototype.update=function(a){this.http.put("/api/user/"+a,this.data).then(function(a){window.location.reload(!0)})},a.prototype.edit=function(){$("input[readonly], textarea[readonly]").removeAttr("readonly"),$("select[disabled]").removeAttr("disabled"),$(".editOverlay").remove(),$(".inputField").removeClass("showEditIcon").unbind("mouseenter mouseleave"),$(".edit-button").removeClass("show-button"),$(".update-button").addClass("show-button")},a.prototype.attached=function(){$(".inputField, .textArea").hover(function(){$(".inputField").addClass("showEditIcon")},function(){$(".inputField").removeClass("showEditIcon")})},a}())||i)),a("EditUser",j)}}}),function(){var a=System.amdDefine;a("user-index.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="row"><div class="col-md-8 col-md-offset-2"><div class="panel panel-default"><table id="userTable" class="table"><thead><tr><th>User Full Name</th><th>User Username</th><th>User Email</th><th>User Role</th><th>Action</th></tr></thead><tbody><tr repeat.for="user of users"><td>${user.name}</td><td>${user.username}</td><td>${user.email}</td><td>${user.role}</td><td><a class="btn btn-default btn-info table-btn" href="/#/users/edit/?id=${user.id}">View</a></td></tr></tbody></table></div></div></div></template>'})}(),System.register("user-index.js",["aurelia-framework","aurelia-http-client","jquery","datatables"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a["default"]},function(a){g=a["default"]}],execute:function(){a("UserIndex",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.http=b}return a.prototype.activate=function(){var a=this;return this.http.get("/api/users").then(function(b){a.users=b.content.data})},a.prototype.attached=function(){f("#userTable").dataTable({scrollX:!0})},a}())||i)),a("UserIndex",j)}}}),function(){var a=System.amdDefine;a("user-register.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="col-md-6 col-md-offset-3"><div class="panel panel-default"><div class="panel-heading">Register</div><div class="panel-body"><div if.bind="errors.length > 0" class="registerErrors"><label repeat.for="error of errors" class="error text-center">${error}</label></div><form class="form-horizontal" role="form" method="POST" submit.delegate="registerUser()"><input type="hidden" name="_token" value="sSSWvNdIjmxEkjEO2SbAWinxNxdLHuR7G74hQMUc"><div class="form-group"><label class="col-md-4 control-label">Name</label><div class="col-md-6"><input type="text" class="form-control" name="name" value.bind="userData[\'name\']"></div></div><div class="form-group"><label class="col-md-4 control-label">Username</label><div class="col-md-6"><input type="text" class="form-control" name="name" value.bind="userData[\'username\']"></div></div><div class="form-group"><label class="col-md-4 control-label">E-Mail Address</label><div class="col-md-6"><input type="email" class="form-control" name="email" value.bind="userData[\'email\']"></div></div><div class="form-group"><label class="col-md-4 control-label">Role</label><div class="col-md-6"><select class="form-control" name="role" value.bind="userData[\'role\']"><option repeat.for="option of roles" model.bind="option">${option.name}</option></select></div></div><div class="form-group"><label class="col-md-4 control-label">Password</label><div class="col-md-6"><input type="password" class="form-control" name="password" value.bind="userData[\'password\']"></div></div><div class="form-group"><label class="col-md-4 control-label">Confirm Password</label><div class="col-md-6"><input type="password" class="form-control" name="password_confirmation" value.bind="userData[\'password_confirmation\']"></div></div><div class="form-group"><div class="col-md-6 col-md-offset-4"><button type="submit" class="btn btn-primary"><i class="fa fa-btn fa-user"></i>Register</button></div></div></form></div></div></div></template>'})}(),System.register("user-register.js",["aurelia-framework","aurelia-http-client","aurelia-router"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.Router}],execute:function(){a("UserRegister",(g=d(e,f),i=g(h=function(){function a(b,d){c(this,a),this.http=b,this.router=d}return a.prototype.activate=function(){this.userData={name:"",email:"",password:"",password_confirmation:"",role:""},this.errors=[],this.roles=[{value:"facilitator",name:"Facilitator"},{value:"casemanager",name:"Case Manager"},{value:"caseadmin",name:"Case Admin"},{value:"admin",name:"Admin"}]},a.prototype.attached=function(){},a.prototype.registerUser=function(){var a=this;this.http.post("/register",this.userData).then(function(b){"false"==b.content.success?a.errors=b.content.data:a.router.navigateToRoute("user-edit",{id:b.content.user.id})})},a}())||h)),a("UserRegister",i)}}}),function(){var a=System.amdDefine;a("users.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="./child-nav-bar.html"></require><child-nav-bar router.bind="router"></child-nav-bar></template>'})}(),System.register("users.js",["aurelia-framework","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient}],execute:function(){a("Users",(f=d(e),h=f(g=function(){function a(b){function d(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null}c(this,a),this.http=b.configure(function(a){a.withHeader("X-CSRF-TOKEN",d("XSRF-TOKEN"))})}return a.prototype.configureRouter=function(a,b){a.map([{route:[""],name:"user-index",moduleId:"user-index",nav:!0,title:"View All Users"},{route:["/register"],name:"user-register",moduleId:"user-register",nav:!0,title:"User Register"},{route:["/edit/"],name:"user-edit",moduleId:"user-edit",nav:!1}]),this.router=b},a}())||g)),a("Users",h)}}}),function(){var a=System.amdDefine;a("victim-table.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><table id="victimTable" class="table"><thead><tr><th>Victim ID</th><th>Victim First Name</th><th>Victim Last Name</th><th>Action</th></tr></thead><tbody><tr repeat.for="victim of victims"><td>${victim.victimId}</td><td>${victim.firstName}</td><td>${victim.lastName}</td><td><a click.delegate="selectVictim()">Select</a></td></tr></tbody></table></template>'})}(),System.register("victim-table.js",["aurelia-framework","aurelia-http-client","jquery","datatables"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a["default"]},function(a){g=a["default"]}],execute:function(){a("VictimTable",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.http=b}return a.prototype.activate=function(){this.victims=[{victimId:"v1ID",firstName:"v1f",lastName:"v1l"},{victimId:"v2ID",firstName:"v2f",lastName:"v2l"}]},a.prototype.attached=function(){f("#victimTable").dataTable({})},a.prototype.victimSearch=function(a){f("#victimModal").modal("show")},a}())||i)),a("VictimTable",j)}}}),function(){var a=System.amdDefine;a("victims.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="./child-nav-bar.html"></require><child-nav-bar router.bind="router"></child-nav-bar></template>'})}(),System.register("victims.js",["aurelia-framework","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient}],execute:function(){a("Victims",(f=d(e),h=f(g=function(){function a(b){function d(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null}c(this,a),this.http=b.configure(function(a){a.withHeader("X-CSRF-TOKEN",d("XSRF-TOKEN"))})}return a.prototype.configureRouter=function(a,b){a.map([{route:["","victim/view/"],moduleId:"view-victims",nav:!0,title:"Victim View"},{route:["create"],moduleId:"create-victim",nav:!0,title:"Victim Create"},{route:["edit"],name:"edit-victim",moduleId:"edit-victim",nav:!1,title:"Victim Edit"}]),this.router=b},a}())||g)),a("Victims",h)}}}),System.register("view-admin.js",["aurelia-framework","aurelia-http-client"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient}],execute:function(){a("Admin",(f=d(e),h=f(g=function(){function a(b){function d(a){var b=new RegExp(a+"=([^;]+)"),c=b.exec(document.cookie);return null!=c?unescape(c[1]):null}c(this,a),this.http=b.configure(function(a){a.withHeader("X-CSRF-TOKEN",d("XSRF-TOKEN"))})}return a.prototype.configureRouter=function(a,b){a.map([{route:[""],name:"admin-index",moduleId:"view-admin",nav:!0,title:"Admin View"},{route:["/assign"],name:"facilitator-assign",moduleId:"facilitator-assign",nav:!0,title:"Facilitator Assignments"}]),this.router=b},a}())||g)),a("Admin",h)}}}),function(){var a=System.amdDefine;a("view-case.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div innerhtml.bind="html"></div></template>'})}(),System.register("view-case.js",["aurelia-framework","aurelia-http-client","jquery","datatables"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a["default"]},function(a){g=a["default"]}],execute:function(){a("ViewCase",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.http=b}return a.prototype.activate=function(){var a=this;return this.http.get("/api/cases").then(function(b){a.html=b.content.html})},a.prototype.attached=function(){f("#openCasesTable").dataTable({scrollX:!0}),f("#closedCasesTable").dataTable({scrollX:!0})},a}())||i)),a("ViewCase",j)}}}),function(){var a=System.amdDefine;a("view-offenders.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div innerhtml.bind="html"></div></template>'})}(),System.register("view-offenders.js",["aurelia-framework","aurelia-http-client","jquery","datatables"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a["default"]},function(a){g=a["default"]}],execute:function(){a("ViewOffenders",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.http=b}return a.prototype.activate=function(){var a=this;return this.http.get("/api/offender").then(function(b){a.html=b.content.html})},a.prototype.attached=function(){f("#offendersTable").dataTable({scrollX:!0})},a}())||i)),a("ViewOffenders",j)}}}),function(){var a=System.amdDefine;a("view-victims.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div innerhtml.bind="html"></div></template>'})}(),System.register("view-victims.js",["aurelia-framework","aurelia-http-client","jquery","datatables"],function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a["default"]},function(a){g=a["default"]}],execute:function(){a("ViewVictims",(h=d(e),j=h(i=function(){function a(b){c(this,a),this.http=b}return a.prototype.activate=function(){var a=this;return this.http.get("/api/victim").then(function(b){a.html=b.content.html})},a.prototype.attached=function(){f("#victimsTable").dataTable({scrollX:!0})},a}())||i)),a("ViewVictims",j)}}});